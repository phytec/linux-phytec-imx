/*
 * Copyright (C) 2015 PHYTEC Messtechnik
 * Author: Matthias Rabe <matthias.rabe@sigma-chemnitz.de>
 *
 * The code contained herein is licensed under the GNU General Public
 * License. You may obtain a copy of the GNU General Public License
 * Version 2 or later at the following locations:
 *
 * http://www.opensource.org/licenses/gpl-license.html
 * http://www.gnu.org/copyleft/gpl.html
 */

/dts-v1/;
#include "imx6q.dtsi"
#include "imx6qdl-phytec-phycore-som.dtsi"
#include "imx6qdl-phytec-mira.dtsi"
#include "imx6qdl-phytec-mira-peb-eval-01.dtsi"

/ {
	model = "Phytec phyBOARD-MIRA Quad Carrier-Board with nand+etm0700";
	model-short = "miraq";
	compatible = "phytec,imx6q-pbac06", "phytec,imx6qdl-pcm058", "fsl,imx6q";

	aliases {
		ipu1 = &ipu2;
	};

	chosen {
		linux,stdout-path = &uart2;
	};

	mxcfb1: fb@0 {
		disp_dev = "lcd";
		interface_pix_fmt = "RGB24";
		mode_str = "ETM0700";
		default_bpp = <16>;
		int_clk = <0>;
		late_init = <0>;
		status = "okay";
	};

	lcd@0 {
		compatible = "fsl,lcd";
		ipu_id = <0>;
		disp_id = <0>;
		default_ifmt = "RGB24";
		pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_ipu1_1>;
		status = "okay";
	};
};

&iomuxc {
	imx6qdl-phytec-phyboard-mira {
		pinctrl_lcd_en_switch: lcdenswitchgrp {
			fsl,pins = <
				MX6QDL_PAD_EIM_D22__GPIO3_IO22	0x80000000
			>;
		};
	};

	imx6qdl-phytec-phyboard-edt-ft5x06 {
		pinctrl_edt_ft5x06: edt_ft5x06grp {
			fsl,pins = <
				MX6QDL_PAD_EIM_DA2__GPIO3_IO02	0x1b0b0
			>;
		};
	};
};

&pwm1 {
	status = "okay";
};

&backlight {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_lcd_en_switch>;

	compatible = "pwm-backlight";
	pwms = <&pwm1 0 50000>;
	brightness-levels = <
		0  /*1  2  3  4  5  6*/  7  8  9
		10 11 12 13 14 15 16 17 18 19
		20 21 22 23 24 25 26 27 28 29
		30 31 32 33 34 35 36 37 38 39
		40 41 42 43 44 45 46 47 48 49
		50 51 52 53 54 55 56 57 58 59
		60 61 62 63 64 65 66 67 68 69
		70 71 72 73 74 75 76 77 78 79
		80 81 82 83 84 85 86 87 88 89
		90 91 92 93 94 95 96 97 98 99
		100
	>;
	default-brightness-level = <94>;
	enable-gpios = <&gpio1 9>;
	binary-gpios = <&gpio3 22 0>; /* on or off -> depends on brightness */
	power-supply = <&lcd_3v3>;
	status = "okay";
};

&flexcan1 {
	status = "okay";
};

&fec {
	status = "okay";
};

&flash {
	status = "okay";
};

&gpmi {
	status = "okay";
};

&i2c1 {
	status = "okay";

	polytouch: edt-ft5x06@38 {
		compatible = "edt,edt-ft5406";
		reg = <0x38>;
		pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_edt_ft5x06>;
		interrupt-parent = <&gpio3>;
		interrupts = <2 0>;
	};
};

&i2c_rtc {
	status = "okay";
};

&leddim {
	status = "okay";
};

&mt9v024m {
	status = "okay";
};

&pcie {
	status = "okay";
};

&stmpe {
	status = "okay";
};

&uart2 {
	status = "okay";
};

&uart3 {
	status = "okay";
};

&usbh1 {
	status = "okay";
};

&usbotg {
	status = "okay";
};

&usdhc1 {
	status = "okay";
};
